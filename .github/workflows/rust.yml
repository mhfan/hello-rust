
name: Rust CI, Cargo Build & Test

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

env:
  CARGO_TERM_COLOR: always

jobs:
  build:
    #name: Build Rust Project
    runs-on: ubuntu-22.04

    #strategy:
    #  matrix:
    #    toolchain:
    #      - stable
    #      - beta
    #      - nightly

    steps:
    - uses: actions/checkout@v3

    #- run: rustup update ${{ matrix.toolchain }} && rustup default ${{ matrix.toolchain }}

    - name: Cargo Build
      run: cargo build --verbose

    - name: Run tests
      run: cargo test  --verbose -- --color always --nocapture
